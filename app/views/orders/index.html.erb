<h1>Orders</h1>

<form action="/orders" method="get">
  <label for="start_at">Start Date:</label>
  <input type="date" name="start_at" id="start_at">

  <label for="end_at">End Date:</label>
  <input type="date" name="end_at" id="end_at">

  <input type="submit" value="Fetch Orders">
</form>

<% if @error_message %>
  <p>Error: <%= @error_message %></p>
<% else %>
  <% if @orders&.any? %>
    <table>
      <thead>
        <tr>
          <th>Order ID</th>
          <th>Total Amount</th>
          <th>Created At</th>
        </tr>
      </thead>
      <tbody>
        <% @orders.each do |order| %>
          <tr>
            <td><%= order['id'] %></td>
            <td><%= order['total_money']['amount'] %> <%= order['total_money']['currency'] %></td>
            <td><%= order['created_at'] %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% else %>
    <p>No orders found.</p>
  <% end %>
<% end %>
